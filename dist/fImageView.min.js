var Fei=window.Fei={version:"1.0.0"};
!function(){var e={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},t=function(){return div=document.createElement("div"),div.setAttribute("class","t"),"t"===div.className}(),n=Object.prototype,r=n.toString,o=["valueOf","toLocaleString","toString","constructor"],c=Fei.utils={getScrollTop:function(e){return e=e||document,Math.max(e.documentElement.scrollTop,e.body.scrollTop)},getScrollLeft:function(e){return e=e||document,Math.max(e.documentElement.scrollLeft,e.body.scrollLeft)},getCoord:function(e){var t=0,n=0;if(document.documentElement.getBoundingClientRect){var r=e.getBoundingClientRect(),o=e.ownerDocument;navigator.userAgent.indexOf("MSIE 6.0")>=0?(t=r.top-2+c.getScrollTop(o),n=r.left-2+c.getScrollLeft(o)):(t=r.top+c.getScrollTop(o),n=r.left+c.getScrollLeft(o))}else for(;e.offsetParent;)t+=e.offsetTop,n+=e.offsetLeft,e=e.offsetParent;return{top:t,left:n}},setAttr:function(n,r,o){return n?(n.setAttribute(t?r:e[r]||r,o),"style"===r&&(n.style.cssText=o),n):n},getAttr:function(n,r){return n.getAttribute(t?r:e[r]||r)},createElement:function(e,t){var n=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",e):document.createElement(e);if(t)for(var r in t)c.setAttr(n,r,t[r]);return n},removeChildren:function(e){for(var t=e.childNodes,n=t.length-1;n>=0;n--)e.removeChild(t.item(n))},getBrowserStyle:function(e,t){for(var n=["","-o-","-ms-","-moz-","-webkit-"],r="",o=0;o<n.length;o++)r+=n[o]+e+":"+t+";";return r},addEvent:function(e,t,n,r){if(!e)return e;var o=function(){n.apply(r||this,arguments)};e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent?e.attachEvent("on"+t,o):e["on"+t]=o},getGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})},clone:function(e){if(null===e||void 0===e)return e;if(e.nodeType&&e.cloneNode)return e.cloneNode(!0);var t,n,l,i,a,u=r.call(e);if("[object Date]"===u)return new Date(e.getTime());if("[object Array]"===u)for(t=e.length,i=[];t--;)i[t]=c.clone(e[t]);else if("[object Object]"===u&&e.constructor===Object){i={};for(a in e)i[a]=c.clone(e[a]);if(o)for(n=o.length;n--;)l=o[n],e.hasOwnProperty(l)&&(i[l]=e[l])}return i||e},isUseVml:function(){var e=navigator.userAgent.toLowerCase(),t=!!window.ActiveXObject||"ActiveXObject"in window,n=t&&e.indexOf("msie")>-1&&8===parseInt(e.match(/msie ([\d.]+)/)[1]),r=t&&e.indexOf("msie")>-1&&parseInt(e.match(/msie ([\d.]+)/)[1])<8;return function(e){return n||r}}()}}();
!function(){var t=Fei.utils;if(t.isUseVml()){{Fei.ieRotate={rotate:function(e,i){if(!e)return e;if(0!==this.length&&"undefined"!=typeof i){"number"==typeof i&&(i={angle:i});var s;if(e.Fei&&e.Fei.PhotoEffect)e.Fei.PhotoEffect._handleRotation(i),s=e.Fei.PhotoEffect._rootObj;else{var a=t.clone(i);s=new Fei.PhotoEffect(e,a)._rootObj}return s}}}}Fei.PhotoEffect=function(t,e){if(this._img=t,this._onLoadDelegate=[e],this._rootObj=document.createElement("span"),this._rootObj.style.display="inline-block",this._rootObj.Fei={PhotoEffect:this},t.parentNode.insertBefore(this._rootObj,t),t.complete)this._Loader();else{var i=this;t.onload=function(){i._Loader.call(i)},t.onreadystatechange=function(){"complete"==this.readyState&&i._Loader.call(i)}}},Fei.PhotoEffect.prototype={_setupParameters:function(t){this._parameters=this._parameters||{},"number"!=typeof this._angle&&(this._angle=0),"number"==typeof t.angle&&(this._angle=t.angle),this._parameters.animateTo="number"==typeof t.animateTo?t.animateTo:this._angle,this._parameters.step=t.step||this._parameters.step||null,this._parameters.easing=t.easing||this._parameters.easing||this._defaultEasing,this._parameters.duration=t.duration||this._parameters.duration||1e3,this._parameters.callback=t.callback||this._parameters.callback||this._emptyFunction,this._parameters.center=t.center||this._parameters.center||["50%","50%"],this._rotationCenterX="string"==typeof this._parameters.center[0]?parseInt(this._parameters.center[0],10)/100*this._imgWidth*this._aspectW:this._parameters.center[0],this._rotationCenterY="string"==typeof this._parameters.center[1]?parseInt(this._parameters.center[1],10)/100*this._imgHeight*this._aspectH:this._parameters.center[1],t.bind&&t.bind!=this._parameters.bind&&this._BindEvents(t.bind)},_emptyFunction:function(){},_defaultEasing:function(t,e,i,s,a){return-s*((e=e/a-1)*e*e*e-1)+i},_handleRotation:function(t,e){this._setupParameters(t),this._angle==this._parameters.animateTo?this._rotate(this._angle):this._animateStart()},_BindEvents:function(t){if(t&&this._eventObj){if(this._parameters.bind){this._parameters.bind}this._parameters.bind=t}},_Loader:function(){return function(){var t=this._img.width,e=this._img.height,i=this._img.style.top,s=this._img.style.left,a=this._img.style.cursor;this._imgWidth=t,this._imgHeight=e,this._img.parentNode.removeChild(this._img),this._vimage=this.createVMLNode("image"),this._vimage.src=this._img.src,this._vimage.style.height="100%",this._vimage.style.width="100%",this._vimage.style.position="absolute",this._vimage.style.top="0px",this._vimage.style.left="0px",this._vimage.setAttribute("id",this._img.getAttribute("id")+"_img"),this._aspectW=this._aspectH=1,this._container=this.createVMLNode("group"),this._container.style.width=t,this._container.style.height=e,this._container.style.position="absolute",this._container.style.top="0px",this._container.style.left="0px",this._container.setAttribute("coordsize",t-1+","+(e-1)),this._container.appendChild(this._vimage),this._rootObj.appendChild(this._container),this._rootObj.style.position="relative",this._rootObj.style.width=t+"px",this._rootObj.style.height=e+"px",this._rootObj.style.top=i,this._rootObj.style.left=s,this._rootObj.style.cursor=a,this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._eventObj=this._rootObj;for(var r;r=this._onLoadDelegate.shift();)this._handleRotation(r,!0)}}(),_animateStart:function(){this._timer&&clearTimeout(this._timer),this._animateStartTime=+new Date,this._animateStartAngle=this._angle,this._animate()},_animate:function(){var t=+new Date,e=t-this._animateStartTime>this._parameters.duration;if(e&&!this._parameters.animatedGif)clearTimeout(this._timer);else{if(this._canvas||this._vimage||this._img){var i=this._parameters.easing(0,t-this._animateStartTime,this._animateStartAngle,this._parameters.animateTo-this._animateStartAngle,this._parameters.duration);this._rotate(~~(10*i)/10)}this._parameters.step&&this._parameters.step(this._angle);var s=this;this._timer=setTimeout(function(){s._animate.call(s)},10)}this._parameters.callback&&e&&(this._angle=this._parameters.animateTo,this._rotate(this._angle),this._parameters.callback.call(this._rootObj))},_rotate:function(){Math.PI/180;return function(t){this._angle=t,this._container.style.rotation=t%360+"deg",this._vimage.style.top=-(this._rotationCenterY-this._imgHeight/2)+"px",this._vimage.style.left=-(this._rotationCenterX-this._imgWidth/2)+"px",this._container.style.top=this._rotationCenterY-this._imgHeight/2+"px",this._container.style.left=this._rotationCenterX-this._imgWidth/2+"px"}}(),createVMLNode:function(){document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{return!document.namespaces.rvml&&document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<rvml:"+t+' class="rvml">')}}catch(t){return function(t){var e=document.createElement(t);return e.setAttribute("class","rvml"),e.setAttribute("className","rvml"),e.setAttribute("xmlns","urn:schemas-microsoft.com:vml"),e}}}()}}}();
!function(){var t=Fei.utils,e=Fei.fImage=function(e){var i=this;if(i.isLoaded=!1,i.src="",i.orgWidth=0,i.orgHeight=0,i.width=0,i.height=0,i.rotation=0,i.translateSpeed=300,i.translates={y:0,x:0},i.domId="fei_imgview_"+t.getGuid(),i.dom=t.createElement("img",{id:i.domId}),i.onload=function(){},e)for(var r in e)i[r]=e[r];i.orgTranslateSpeed=i.translateSpeed};e.prototype={init:function(){var t=this;return t.src&&t.setSrc(t.src),t.dom.complete?t.imgLoad.call(t):(t.dom.onload=function(){t.imgLoad.call(t)},t.dom.onreadystatechange=function(){"complete"==this.readyState&&t.imgLoad.call(t)}),t},imgLoad:function(){var t=this;if(!t.isLoaded){t.isLoaded=!0;try{var e=new Image;e.src=t.src,t.width=e.width,t.height=e.height,t.orgWidth=e.width,t.orgHeight=e.height,t.rotation=0,delete e}catch(i){}t.onload&&t.onload.call(window,t)}},setSrc:function(t){var e=this;return e.isLoaded=!1,e.src=t||e.src,e.dom.src=e.src,e.dom.complete&&e.imgLoad.call(e),e},doChange:function(){var e=this,i=document.getElementById(e.domId);if(i){if(t.isUseVml()){if(i.style.left=e.translates.x+"px",i.style.top=e.translates.y+"px",!e.isMoveing){i.style.cursor="move",i.style.width=e.width+"px",i.style.height=e.height+"px";var r=i.children||i.childNodes;if(r.length>0){var a=r[0];a.style.width=e.width+"px",a.style.height=e.height+"px"}Fei.ieRotate.rotate(document.getElementById(e.domId),{animateTo:e.rotation,duration:e.translateSpeed})}}else{var o="cursor:move;width:"+e.width+"px;height:"+e.height+"px;";o+=t.getBrowserStyle("transform","translate("+e.translates.x+"px,"+e.translates.y+"px) rotate("+e.rotation+"deg)"),e.translateSpeed>0&&(o+=t.getBrowserStyle("transition","all "+e.translateSpeed/1e3+"s ease")),t.setAttr(i,"style",o)}return e}},scale:function(t,e,i){var r=this,a=r.rotation%360,o=r.getAdSize(),n=0,e=e||.5,i=i||.5;(90===a||270===a||-90===a||-270===a)&&(n=(o.h-o.w)/2);var h=r.translates.x-(r.width-o.w)/2+n-(r.width*t-r.width)*e,s=r.translates.y-(r.height-o.h)/2-n-(r.height*t-r.height)*i;return r.width=r.width*t,r.height=r.height*t,r.transition(h,s),r},transition:function(t,e){var i=this;return i.translates.y=e,i.translates.x=t,i},rotate:function(t){var e=this;return e.rotation=e.rotation+t,e},getAdSize:function(){var t=this,e=t.rotation%360,i=t.width,r=t.height;return(90===e||270===e||-90===e||-270===e)&&(i=t.height,r=t.width),{w:i,h:r}},setAdSize:function(t,e){var i=this,r=i.rotation%360;return 90===r||270===r||-90===r||-270===r?(i.height=t,i.width=e):(i.height=e,i.width=t),i},getOrgSize:function(){var t=this,e=t.rotation%360,i=t.orgWidth,r=t.orgHeight;return(90===e||270===e||-90===e||-270===e)&&(i=t.orgHeight,r=t.orgWidth),{w:i,h:r}}}}();
!function(){var e=Fei.utils,t=Fei.fImagePanel=function(t){var n=this;if(n.width=0,n.height=0,n.images=[],n.currentIndex=0,n.dom=e.createElement("div",{style:"position:relative;text-align:left;width:100%;height:100%;display:block;overflow:hidden;"}),t)for(var i in t)n[i]=t[i]};t.prototype={initImage:function(t){var n=this;return n.image=new Fei.fImage({src:t||"",container:n,onload:function(){n.stretchOptimally().centerImage().doChange()}}),t||n.image.setSrc(n.images[n.currentIndex]),e.removeChildren(n.dom),n.dom.appendChild(n.image.dom),n.image.init(),n.initEvents(),n},render:function(t){var n=this;return(t||document.body).appendChild(n.dom),n.width=n.dom.offsetWidth,n.height=n.dom.offsetHeight,n.coord=e.getCoord(n.dom),n.initImage(),n},setImages:function(e){var t=this;return t.images=e,t.currentIndex=0,t.image.setSrc(t.images[t.currentIndex]),t},initEvents:function(){var t=this,n=document.getElementById(t.image.domId);return e.addEvent(n,"mousedown",t.mousedown,t),e.addEvent(n,"mousemove",t.mousemove,t),e.addEvent(n,"mouseup",t.mouseup,t),e.addEvent(n,"mouseout",t.mouseup,t),"onmousewheel"in document.documentElement?e.addEvent(n,"mousewheel",t.mousewheel,t):e.addEvent(n,"DOMMouseScroll",t.mousewheel,t),t},mousewheel:function(e){var t=this,e=e||window.event,n=e.wheelDelta,i=1,a=t.coord,r=e.clientX,o=e.clientY,s=t.image;void 0===n&&(n=0-(e.detail||0)),i=n>0?1.1:.9;var d={top:o-a.top-s.translates.y,left:r-a.left-s.translates.x};s.scale(i,d.left/s.width,d.top/s.height).doChange(),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),window.event?window.event.returnValue=!1:e.preventDefault()},mousedown:function(e){var t=this,e=e||window.event,n=t.image;t.lastTranslateX=n.translates.x,t.lastTranslateY=n.translates.y,t.moveStartX=e.x||e.clientX,t.moveStartY=e.y||e.clientY,t.isMoveing=!0,n.isMoveing=!0,n.translateSpeed=0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),window.event?window.event.returnValue=!1:e.preventDefault()},mousemove:function(e){var t,n=this,e=e||window.event;if(n.isMoveing){t=n.image;var i=(e.x||e.clientX)-n.moveStartX+n.lastTranslateX,a=(e.y||e.clientY)-n.moveStartY+n.lastTranslateY;n.image.transition(i,a).doChange()}e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),window.event?window.event.returnValue=!1:e.preventDefault()},mouseup:function(e){var t=this;t.isMoveing=!1,t.image.isMoveing=!1,t.image.translateSpeed=t.image.orgTranslateSpeed},doChange:function(){var e=this,t=e.image;return t.doChange(),e},stretchH:function(){var e=this,t=e.image,n=t.getOrgSize();return t.setAdSize(e.width,n.h*e.width/n.w),e},stretchV:function(){var e=this,t=e.image,n=t.getOrgSize();return t.setAdSize(n.w*e.height/n.h,e.height),e},originalOptimally:function(){var e=this,t=e.image;return t.width=t.orgWidth,t.height=t.orgHeight,e},stretchOptimally:function(){var e=this,t=e.image,n=t.getOrgSize(),i=t.getAdSize();return n.h<=e.height&&n.w<=e.width?e.originalOptimally():i.w*e.height/i.h>e.width?e.stretchH():e.stretchV(),e},centerImage:function(){var e=this,t=e.image,n=t.rotation%360,i=t.getAdSize(),a=0;(90===n||270===n||-90===n||-270===n)&&(a=(i.h-i.w)/2);var r=(e.width-i.w)/2-a,o=(e.height-i.h)/2+a;return t.transition(r,o),e},rotate:function(e){var t=this,n=t.image;return n.rotate(e),t},scale:function(e){var t=this,n=t.image;return n.scale(e),t},switchTo:function(t){var n=this,i=n.image;return e.isUseVml()?n.initImage(n.images[t]):i.setSrc(n.images[t]),n},nextImage:function(){{var e=this;navigator.userAgent.toLowerCase(),e.image}return e.currentIndex++,e.currentIndex>e.images.length-1&&(e.currentIndex=0),e.switchTo(e.currentIndex),e},upImage:function(){{var e=this;e.image}e.currentIndex--,e.currentIndex<0&&(e.currentIndex=e.images.length-1),e.switchTo(e.currentIndex)}}}();